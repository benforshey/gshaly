"use strict";var addEventToArray=function addEventToArray(e,t){var n=e.event,i=e.arr;return i.map(function(e){return e.addEventListener(n,t)})},throttle=function throttle(e,t,n){t||(t=250);var i=void 0,r=void 0;return function(){var o=n||this,s=+new Date,a=arguments;i&&i+t>s?(clearTimeout(r),r=setTimeout(function(){i=s,e.apply(o,a)},t)):(i=s,e.apply(o,a))}},insertAfter=function insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextElementSibling)},setActivePage=function setActivePage(e){var t=Array.from(e),n={};n.pathname=document.location.pathname,document.location.hash.length&&(n.hash=document.location.hash),t.map(function(e){e.href.endsWith(n.pathname)||e.href.endsWith(n.hash)?e.classList.add("active"):e.classList.remove("active")})},determinePage=function determinePage(e,t){return t?window.location.pathname.includes(e):window.location.pathname.endsWith(e)},listing={additionalInformationControl:function(e){var t=document.getElementById(e.target.getAttribute("aria-controls"));t.classList.toggle("description-content-isCollapsed"),t.classList.toggle("description-content-isExpanded"),t.classList.contains("description-content-isExpanded")?(e.target.innerText="<< show less",e.target.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false")):(e.target.innerText="show more >>",e.target.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true"))},checkboxFilter:function(){listing.input.value="";var e=listing.filterCheckbox.filter(function(e){return e.classList.contains("filter-and")&&e.checked}).map(function(e){return e.dataset.filter}),t=listing.filterCheckbox.filter(function(e){return e.classList.contains("filter-or")&&e.checked}).map(function(e){return e.dataset.filter});if(1===e.length&&0===t.length?listing.input.value=e[0]:1===t.length&&0===e.length&&(listing.input.value=t[0]),1===e.length&&1===t.length&&(listing.input.value=e[0]+" and "+t[0]),e.length>1&&0===t.length){var n="";e.map(function(e,t,i){n+=t+1!==i.length?e+" and ":""+e}),listing.input.value=n}if(t.length>1&&0===e.length){var i="";t.map(function(e,t,n){i+=t+1!==n.length?e+" or ":""+e}),listing.input.value=i}if(e.length>1&&1===t.length){var r="";e.map(function(e,t,n){r+=t+1!==n.length?e+" and ":""+e}),r+=", "+t[0],listing.input.value=r}if(t.length>1&&1===e.length){var o="";t.map(function(e,t,n){o+=t+1!==n.length?e+" or ":""+e}),o=e[0]+", "+o,listing.input.value=o}if(t.length>1&&e.length>1){var s="";e.map(function(e,t,n){s+=t+1!==n.length?e+" and ":""+e}),s+=", ",t.map(function(e,t,n){s+=t+1!==n.length?e+" or ":""+e}),listing.input.value=s}return listing.DOMSearchGroupState(),listing.filterParse(listing.input.value)},countCheckedListingCheckboxes:function(){var e=listing.listingCheckbox.filter(function(e){return e.checked});return e.length},countFilteredResults:function(){var e={};return e.total=this.queryElementList.length,e.unmatched=document.getElementsByClassName("listing-isHidden").length,e.matched=e.total-e.unmatched,e},filterParse:function(e){var t=e.trim().toLowerCase();return this.querySplit.comma=t.split(",").map(function(e){return e.trim()}).filter(function(e){return!(0===e.length)}),this.querySplit.and=this.querySplit.comma.map(function(e){return/(\s+and\s+)/g.test(e)?e.split(/(\s+and\s+)/g).filter(function(e){return!/(\s+and\s+)/g.test(e)}):!1}).filter(function(e){return e!==!1}),this.querySplit.or=this.querySplit.comma.map(function(e){return/(\s+or\s+)/g.test(e)?e.split(/(\s+or\s+)/g).filter(function(e){return!/(\s+or\s+)/g.test(e)}):!1}).filter(function(e){return e!==!1}),this.querySplit.single=this.querySplit.comma.map(function(e){return/(\s+and\s+)/g.test(e)||/(\s+or\s+)/g.test(e)?!1:e}).filter(function(e){return e!==!1}),this.querySplit.all=[].concat(this.querySplit.single,this.querySplit.and,this.querySplit.or),this.DOMFilterTables()},groupQueryElements:function(){var e=this,t=this.listingGroup.map(function(e){return Array.from(e.children)});return t.map(function(t){return t.map(function(t){return e.queryElementList.push(t)})})},listingGroupAccordion:function(e){var t="";if("BUTTON"===e.target.nodeName)t=e.target.parentNode;else{if("H3"!==e.target.nodeName)return!1;t=e.target}t.classList.toggle("listingGroup-header-isExpanded"),t.classList.toggle("listingGroup-header-isCollapsed"),t.nextElementSibling.hidden?t.nextElementSibling.removeAttribute("hidden"):t.nextElementSibling.hidden="true",t.nextElementSibling.classList.toggle("listingGroup-isExpanded"),t.nextElementSibling.classList.toggle("listingGroup-isCollapsed")},saveQuoteAndRedirect:function(){function e(){var e=listing.listingCheckbox.filter(function(e){return e.checked}),t=[];return e.map(function(e){t.push(e.parentNode.querySelector(".header-name").innerText.trim())}),t}var t=e();localStorage.setItem("quote",JSON.stringify(t)),window.location.href="/ordering/"},DOMSearchGroupState:function(){return this.helperTextNode.classList.remove("helperText-isInserted"),""===this.input.value?(this.filterSearchButton.style.background="hsla(120, 55.6%, 28.2%, .4)",this.helperTextNode.innerHTML='<p>try "iced and fruit", or "organic and iced, china or germany"</p>',this.helperTextNode.classList.add("helperText-isInserted"),this.filterParse("")):(this.filterSearchButton.style.background="hsla(120, 55.6%, 28.2%, 1)",void 0)},DOMFilterHelperText:function(){var e=this.countFilteredResults(),t=this.input.value?'for "'+this.input.value+'"':"shown";return this.helperTextNode.classList.remove("helperText-isInserted"),0===e.matched?document.location.pathname.endsWith("master-product-list/")?(this.helperTextNode.innerHTML="<p>Sorry, there don't seem to be any teas with those characteristics. If you'd like help, you can always call GS Haly using the contact information <a href=\"#footer\">in the footer</a>.</p>",this.helperTextNode.classList.add("helperText-isInserted")):(this.helperTextNode.innerHTML='<p>Sorry, there don\'t seem to be any teas with those characteristics. You can always search the <a href="../">Master Product List</a>.</p>',this.helperTextNode.classList.add("helperText-isInserted")):""===this.input.value?(this.helperTextNode.innerHTML='<p>try "iced and fruit", or "organic and iced, china or germany"</p>',this.helperTextNode.classList.add("helperText-isInserted")):(this.helperTextNode.innerHTML="<p>"+e.matched+" of "+e.total+" results "+t+"</p>",this.helperTextNode.classList.add("helperText-isInserted"))},DOMFilterTables:function(){var e=this;return this.queryElementList.map(function(e){return e.classList.remove("listing-isHidden")}),this.querySplit.single.length&&this.queryElementList.map(function(t){var n=[],i=t.innerText.toLowerCase(),r=Array.from(t.querySelectorAll("[data-filter]")).map(function(e){return e.dataset.filter.toLowerCase()});return n.push(r.some(function(t){return t.includes(e.querySplit.single)})),n.push(i.includes(e.querySplit.single)),0>n.indexOf(!0)?t.classList.add("listing-isHidden"):void 0}),this.querySplit.and.length&&this.queryElementList.map(function(t){var n={},i=[],r=t.innerText.toLowerCase(),o=Array.from(t.querySelectorAll("[data-filter]")).map(function(e){return e.dataset.filter.toLowerCase()});e.querySplit.and.map(function(e){e.map(function(e){var t=[];return t.push(r.includes(e)),o.map(function(n){return t.push(n.includes(e))}),n[e]=t,n})});for(var s in n)n[s].indexOf(!0)>-1?i.push(!0):i.push(!1);return i.indexOf(!1)>-1?t.classList.add("listing-isHidden"):void 0}),this.querySplit.or.length&&this.queryElementList.map(function(t){var n={},i=[],r=t.innerText.toLowerCase(),o=Array.from(t.querySelectorAll("[data-filter]")).map(function(e){return e.dataset.filter.toLowerCase()});e.querySplit.or.map(function(e){e.map(function(e){var t=[];return t.push(r.includes(e)),o.map(function(n){return t.push(n.includes(e))}),n[e]=t,n})});for(var s in n)n[s].indexOf(!0)>-1?i.push(!0):i.push(!1);return 0>i.indexOf(!0)?t.classList.add("listing-isHidden"):void 0}),window.location.pathname.endsWith("master-product-list/")&&this.listingGroup.map(function(e){var t=e.children.length,n=Array.from(e.children).filter(function(e){return e.classList.contains("listing-isHidden")});return t===n.length?e.parentNode.classList.add("listingGroup-isHidden"):e.parentNode.classList.remove("listingGroup-isHidden")}),this.DOMSyncronizeCheckboxWithFilter(),this.DOMFilterHelperText()},DOMQuoteCheckbox:function(e){if(!e||"INPUT"===e.target.nodeName){var t=listing.countCheckedListingCheckboxes();listing.quoteButton.classList.remove("isFull"),listing.quoteButton.innerText="Request a Quote "+t+"/5",t>=5?(listing.listingCheckbox.map(function(e){e.disabled=e.checked?!1:!0}),listing.quoteButton.classList.add("isFull")):listing.listingCheckbox.map(function(e){e.disabled=!1});var n=document.querySelector(".quote-button"),i=listing.quoteButton.cloneNode(!0);return n.parentNode.replaceChild(i,n),i.addEventListener("click",listing.saveQuoteAndRedirect),listing.DOMScrollElements()}},DOMScrollElements:function(){var e=window.scrollY;return e>=this.quoteButtonOffset.top?document.querySelector(".quote-button").classList.add("fixed"):document.querySelector(".quote-button").classList.remove("fixed")},DOMSyncronizeCheckboxWithFilter:function(){var e=this.querySplit.all.reduce(function(e,t){return e.concat(t)},[]);return this.filterCheckbox.map(function(t){var n=RegExp("^"+t.dataset.filter),i=e.map(function(e){return n.test(e)});t.checked=i.includes(!0)?!0:!1})},init:function(){this.additionalInformationButtons=Array.from(document.querySelectorAll(".description-accordion-control")),this.feedbackNode=document.createElement("p"),this.filterCheckbox=Array.from(document.getElementsByClassName("filter-checkbox-native")),this.filterForm=document.querySelector(".main-filter"),this.filterSearchButton=document.querySelector(".filter-searchButton"),this.helperTextNode=document.querySelector(".filter-helperText"),this.input=document.querySelector(".filter-input"),this.inputClearButton=document.querySelector(".filter-input-clearButton"),this.listingGroup=Array.from(document.getElementsByClassName("listingGroup")),this.listingGroupHeader=Array.from(document.getElementsByClassName("listingGroup-header")),this.listingCheckbox=Array.from(document.getElementsByClassName("listing-checkbox-native")),this.queryElementList=[],this.querySplit={},this.quoteButton=document.querySelector(".quote-button"),this.quoteButtonOffset={},this.sidebarNav=document.querySelectorAll(".nav-listingType a"),addEventToArray({event:"click",arr:this.additionalInformationButtons},this.additionalInformationControl),addEventToArray({event:"click",arr:this.listingGroupHeader},this.listingGroupAccordion),addEventToArray({event:"change",arr:this.filterCheckbox},this.checkboxFilter),addEventToArray({event:"click",arr:this.listingGroup},this.DOMQuoteCheckbox),this.quoteButtonOffset.top=document.querySelector(".quote-button").getBoundingClientRect().top+window.scrollY,window.addEventListener("scroll",throttle(this.DOMScrollElements,100,this)),this.filterForm.addEventListener("submit",function(e){return e.preventDefault(),this.filterParse(this.input.value)}.bind(this)),this.input.addEventListener("focus",this.DOMSearchGroupState.bind(this)),this.quoteButton.addEventListener("click",this.saveQuoteAndRedirect),this.groupQueryElements(),setActivePage(this.sidebarNav),this.DOMQuoteCheckbox()}},form={DOMSetProducts:function(){var e=JSON.parse(localStorage.getItem("quote")),t=""+e,n=t.replace(/,/g,",\n");null!==e&&(this.products.value=n),localStorage.removeItem("quote")},navigatorStatus:function(){navigator.onLine?(form.button.innerText="send request",form.button.disabled=!1,form.button.classList.remove("button-isDisabled")):(form.button.innerText="offline",form.button.disabled=!0,form.button.classList.add("button-isDisabled"))},sendFormData:function(){var e=new XMLHttpRequest,t=new FormData(this.orderingForm);e.addEventListener("load",function(e){return 200===e.target.status?(form.button.innerText="request sent",ga("send","event",{eventCategory:"Form",eventAction:"send"}),form.orderingForm.reset()):(ga("send","exception",{exDescription:"form send failure"}),form.button.innerText="error in sending",void 0)}),e.open("POST",this.endpoint,!0),e.send(t)},init:function(){this.button=document.querySelector(".form-button"),this.orderingForm=document.querySelector(".orderingForm"),this.products=document.querySelector(".form-products"),this.endpoint="https://gshaly.com/webhook/form-mail/",this.orderingForm.addEventListener("submit",function(e){e.preventDefault(),form.sendFormData()}),window.addEventListener("online",this.navigatorStatus),window.addEventListener("offline",this.navigatorStatus),this.DOMSetProducts()}},FAQ={DOMFAQAccordion:function(e){"A"===e.target.nodeName&&(FAQ.FAQHeaders.map(function(e){return e.classList.add("FAQ-header-isCollapsed"),e.nextElementSibling.classList.add("FAQ-isHidden")}),e.target.parentElement.classList.remove("FAQ-header-isCollapsed"),e.target.parentElement.nextElementSibling.classList.remove("FAQ-isHidden"),e.target.parentElement.nextElementSibling.classList.add("FAQ-isExpanded"))},init:function(){this.FAQ=document.querySelector(".aside-FAQ"),this.FAQHeaders=Array.from(document.getElementsByTagName("dt")),this.FAQ.addEventListener("click",this.DOMFAQAccordion),this.FAQHeaders.map(function(e,t){return t>0?(e.nextElementSibling.classList.add("FAQ-isHidden"),e.classList.add("FAQ-header-isCollapsed")):void 0})}},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);e.length>t;t++)n[t]=e[t];return n}return Array.from(e)},easeInOutQuad=function easeInOutQuad(e,t,n,i){return e/=i/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},jumper=function jumper(){function e(){return window.scrollY||window.pageYOffset}function t(e){return e.getBoundingClientRect().top+s}function n(e){f||(f=e),m=e-f,p=u(m,s,d,h),window.scrollTo(0,p),h>m?requestAnimationFrame(n):i()}function i(){window.scrollTo(0,s+d),o&&c&&(o.setAttribute("tabindex","-1"),o.focus()),"function"==typeof g&&g(),f=!1}function r(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(h=r.duration||1e3,l=r.offset||0,g=r.callback,u=r.easing||easeInOutQuad,c=r.a11y||!1,s=e(),i===void 0?"undefined":_typeof(i)){case"number":o=void 0,c=!1,a=s+i;break;case"object":o=i,a=t(o);break;case"string":o=document.querySelector(i),a=t(o)}switch(d=a-s+l,_typeof(r.duration)){case"number":h=r.duration;break;case"function":h=r.duration(d)}requestAnimationFrame(n)}var o=void 0,s=void 0,a=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0,f=void 0,m=void 0,p=void 0,g=void 0;return r},singleton=jumper(),timeline={keyboardParse:function(e){return 39===e.keyCode||40===e.keyCode||32===e.keyCode?(e.preventDefault(),this.navigate(!0)):37===e.keyCode||38===e.keyCode?(e.preventDefault(),this.navigate(!1)):27===e.keyCode?(e.preventDefault(),this.navigate()):void 0},navigate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(window.location.hash);window.location.href=e?t.querySelector(".arrow-next").href:e===!1?t.querySelector(".arrow-previous").href:"../"},init:function(){this.anchorList=[].concat(toConsumableArray(document.querySelectorAll('a[href^="#"]'))),this.slideList=document.querySelectorAll("section"),this.fullscreenWrap=document.querySelector(".fullscreen-wrap"),this.fullscreenWrap.style.overflow="hidden";var e=Array.from(this.slideList).filter(function(e){return!e.id.includes("cover-")}),t=function t(e,t){var n=e.querySelectorAll(".timeline-text, .timeline-image");0===t?(n[1].classList.add("fadeInLeft"),n[0].classList.add("fadeInRight")):(n[0].classList.add("fadeInLeft"),n[1].classList.add("fadeInRight")),n[0].style.opacity=1,n[1].style.opacity=1},n=function n(e){var t=e.querySelectorAll(".timeline-text, .timeline-image");t[0].style.opacity=0,t[1].style.opacity=0,t[0].classList.remove("fadeInLeft","fadeInRight"),t[1].classList.remove("fadeInLeft","fadeInRight")},i=function i(){e.map(function(e,i){return window.location.hash==="#"+e.id?t(e,i%2):n(e)})};window.addEventListener("hashchange",i.bind(this)),window.addEventListener("keydown",this.keyboardParse.bind(this),!0),window.addEventListener("keypress",this.keyboardParse.bind(this),!0)}},teaKnowledge={DOMNavPosition:function(){var e=window.scrollY;return e>=this.navOffset.top?document.querySelector(".teaKnowledge-nav-wrap").classList.add("fixed"):document.querySelector(".teaKnowledge-nav-wrap").classList.remove("fixed")},generateTableOfContents:function(){var e=document.querySelector(".teaKnowledge-sectionNav>.active"),t=document.createElement("ol"),n=document.querySelectorAll("section>h2"),i="";[].concat(toConsumableArray(n)).map(function(e){i+='<li class="teaKnowledge-tableOfContents"><a href="#'+e.id+'">'+e.innerText+"</a></li>"}),t.innerHTML=i,insertAfter(t,e)},init:function(){this.sidebarNav=document.querySelectorAll(".teaKnowledge-nav a"),this.navOffset={},setActivePage(this.sidebarNav),this.generateTableOfContents(),this.navOffset.top=document.querySelector(".teaKnowledge-nav-wrap").getBoundingClientRect().top+window.scrollY,window.addEventListener("scroll",throttle(this.DOMNavPosition,100,this))}},docReady$$1=function docReady$$1(e){return"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},setSmoothScrollOnAllHash=function setSmoothScrollOnAllHash(){var e=Array.from(document.getElementsByTagName("a")).filter(function(e){return e.hash});addEventToArray({event:"click",arr:e},function(e){singleton(e.target.hash,{duration:250,offset:-16})})},polyfill=function polyfill(){Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function t(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function n(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,r=function r(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,s=arguments.length>1?arguments[1]:void 0;if(s!==void 0){if(!t(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var a,l=r(i.length),u=t(n)?Object(new n(l)):Array(l),c=0;l>c;)a=i[c],u[c]=s?o===void 0?s(a,c):s.call(o,a,c):a,c+=1;return u.length=l,u}}()),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,o=Math.max(r>=0?r:i-Math.abs(r),0);i>o;){if(n[o]===e)return!0;o++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),t+e.length>this.length?!1:-1!==this.indexOf(e,t)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=""+this;("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.lastIndexOf(e,t);return-1!==i&&i===t})},siteInit=function siteInit(){polyfill(),determinePage("company-history",!0)&&timeline.init(),determinePage("master-product-list",!0)&&listing.init(),determinePage("ordering",!0)&&(form.init(),FAQ.init()),determinePage("tea-knowledge",!0)&&teaKnowledge.init(),setActivePage(document.querySelectorAll(".section-nav a")),setSmoothScrollOnAllHash()};"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(e){console.log("ServiceWorker registration successful with scope: "+e.scope)}).catch(function(e){console.log("ServiceWorker registration failed: "+e)}),docReady$$1(siteInit);