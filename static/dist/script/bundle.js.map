{"version":3,"file":"bundle.js","sources":["../../src/script/module/utility.js","../../src/script/module/masterProductList.js","../../src/script/module/ordering.js","../../src/script/module/scroll.js","../../src/script/module/timeline.js","../../src/script/module/teaKnowledge.js","../../src/script/main.js"],"sourcesContent":["const docReady = function (callback) {\n  if (document.readyState !== 'loading') {\n    return callback()\n  } else {\n    return document.addEventListener('DOMContentLoaded', callback)\n  }\n}\n\nconst addEventToArray = (configObj, callback) => {\n  const event = configObj.event\n  const arr = configObj.arr\n\n  return arr.map((index) => {\n    return index.addEventListener(event, callback)\n  })\n}\n\n// A basic debounce function, which could use a rewrite.\nconst debounce = function (func, delay = 500) {\n  let timeoutID  // will be overwritten\n\n  return function () {  // would honestly like to attempt a rewrite with .bind()\n    const context = this\n    const args = arguments\n\n    const later = function () {\n      timeoutID = null\n      // .apply() to current argument func rather than return a new one with .bind()\n      func.apply(context, args)\n    }\n\n    clearTimeout(timeoutID)\n    timeoutID = setTimeout(later, delay)\n  }\n}\n\n// https://remysharp.com/2010/07/21/throttling-function-calls\nconst throttle = function (fn, threshhold, scope) {\n  threshhold || (threshhold = 250)\n  let last\n  let deferTimer\n  return function () {\n    let context = scope || this\n    let now = +new Date()\n    let args = arguments\n\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer)\n      deferTimer = setTimeout(function () {\n        last = now\n        fn.apply(context, args)\n      }, threshhold)\n    } else {\n      last = now\n      fn.apply(context, args)\n    }\n  }\n}\n\n// A small function to wrap native insertBefore into insertAfter.\nconst insertAfter = function (newNode, referenceNode) {\n  return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextElementSibling)\n}\n\n// Match location.pathname to list of links and set active class.\nconst setActivePage = function (nodeList) {\n  const nodeArray = Array.from(nodeList)\n  const workingURL = {}\n  workingURL.pathname = document.location.pathname\n\n  if (document.location.hash.length) {\n    workingURL.hash = document.location.hash\n  }\n\n  nodeArray.map((element) => {\n    if (element.href.endsWith(workingURL.pathname) || element.href.endsWith(workingURL.hash)) {\n      element.classList.add('active')\n      // element.setAttribute('aria-role', 'current')\n    } else {\n      element.classList.remove('active')\n      // element.removeAttribute('aria-role')\n    }\n  })\n}\n\nconst determinePage = (pageName, permissive) => {\n  if (permissive) {\n    return window.location.pathname.includes(pageName)\n  } else {\n    return window.location.pathname.endsWith(pageName)\n  }\n}\n\nexport {\n  addEventToArray,\n  debounce,\n  docReady,\n  throttle,\n  insertAfter,\n  setActivePage,\n  determinePage\n}\n","/* eslint-env browser */\nimport { addEventToArray, setActivePage, throttle } from './utility.js'\n\nconst listing = {\n  additionalInformationControl (e) {\n    // The 'aria-controls' and ID of the hidden text match, so use that to get the element and apply necessary classes.\n    const text = document.getElementById(e.target.getAttribute('aria-controls'))\n\n    // Toggle visiblity and animation classes on the text.\n    text.classList.toggle('description-content-isCollapsed')\n    text.classList.toggle('description-content-isExpanded')\n\n    // Change the text on the button to show the correct description and toggle aria states.\n    if (text.classList.contains('description-content-isExpanded')) {\n      e.target.innerText = '<< show less'\n      e.target.setAttribute('aria-expanded', 'true')\n      text.setAttribute('aria-hidden', 'false')\n    } else {\n      e.target.innerText = 'show more >>'\n      e.target.setAttribute('aria-expanded', 'false')\n      text.setAttribute('aria-hidden', 'true')\n    }\n    return\n  },\n  checkboxFilter () {\n    // Reset the value.\n    listing.input.value = ''\n\n    // Use listing.filterCheckbox because of document scope from Listener.\n    const filterAND = listing.filterCheckbox.filter((el) => {\n      return el.classList.contains('filter-and') && el.checked\n    }).map((el) => {\n      return el.dataset.filter\n    })\n    const filterOR = listing.filterCheckbox.filter((el) => {\n      return el.classList.contains('filter-or') && el.checked\n    }).map((el) => {\n      return el.dataset.filter\n    })\n\n    // Single-word query.\n    if (filterAND.length === 1 && filterOR.length === 0) {\n      listing.input.value = filterAND[0]\n    } else if (filterOR.length === 1 && filterAND.length === 0) {\n      listing.input.value = filterOR[0]\n    }\n\n    // Two-word AND query.\n    if (filterAND.length === 1 && filterOR.length === 1) {\n      listing.input.value = `${filterAND[0]} and ${filterOR[0]}`\n    }\n\n    // Multiple-word AND query.\n    if (filterAND.length > 1 && filterOR.length === 0) {\n      let query = ''\n      filterAND.map((el, index, arr) => {\n        if (index + 1 !== arr.length) {\n          query += `${el} and `\n        } else {\n          query += `${el}`\n        }\n      })\n      listing.input.value = query\n    }\n\n    // Multiple-word OR query.\n    if (filterOR.length > 1 && filterAND.length === 0) {\n      let query = ''\n      filterOR.map((el, index, arr) => {\n        if (index + 1 !== arr.length) {\n          query += `${el} or `\n        } else {\n          query += `${el}`\n        }\n      })\n      listing.input.value = query\n    }\n\n    // Multiple-word AND, single OR query.\n    if (filterAND.length > 1 && filterOR.length === 1) {\n      let query = ''\n      filterAND.map((el, index, arr) => {\n        if (index + 1 !== arr.length) {\n          query += `${el} and `\n        } else {\n          query += `${el}`\n        }\n      })\n      query += `, ${filterOR[0]}`\n      listing.input.value = query\n    }\n\n    // Multiple-word OR, single AND query.\n    if (filterOR.length > 1 && filterAND.length === 1) {\n      let query = ''\n      filterOR.map((el, index, arr) => {\n        if (index + 1 !== arr.length) {\n          query += `${el} or `\n        } else {\n          query += `${el}`\n        }\n      })\n      query = `${filterAND[0]}, ` + query\n      listing.input.value = query\n    }\n\n    // Multiple-word AND/OR query.\n    if (filterOR.length > 1 && filterAND.length > 1) {\n      let query = ''\n      filterAND.map((el, index, arr) => {\n        if (index + 1 !== arr.length) {\n          query += `${el} and `\n        } else {\n          query += `${el}`\n        }\n      })\n\n      query += ', '\n\n      filterOR.map((el, index, arr) => {\n        if (index + 1 !== arr.length) {\n          query += `${el} or `\n        } else {\n          query += `${el}`\n        }\n      })\n      listing.input.value = query\n    }\n\n    // Set visual effects on input, since programmatically changing value doesn't do this.\n    listing.DOMSearchGroupState()\n    // Filter the results.\n    return listing.filterParse(listing.input.value)\n  },\n  countCheckedListingCheckboxes () {\n    // For counting, get all the checked checkboxes.\n    const quote = listing.listingCheckbox.filter(el => el.checked)\n    return quote.length\n  },\n  countFilteredResults () {\n    const count = {}\n\n    count.total = this.queryElementList.length\n    count.unmatched = document.getElementsByClassName('listing-isHidden').length\n    count.matched = count.total - count.unmatched\n\n    return count\n  },\n  filterParse (queryString) {\n    // Trim & lowercase the query string\n    const conditionedQueryString = queryString.trim().toLowerCase()\n\n    // Split the query phrase at commas. Trim any excess whitespace.\n    // Filter to return non-empty entries (a byproduct of split).\n    this.querySplit.comma = conditionedQueryString.split(',').map((element) => {\n      return element.trim()\n    }).filter((x) => {\n      return !(x.length === 0)\n    })\n\n    // If the query contains the word 'and', split at 'and' (see regex).\n    // Filter over to remove indexes with (just) the word 'and',\n    // because I want the words surround the 'and', not the 'and'.\n    // Finally, remove indexes that contain 'false'.\n    this.querySplit.and = this.querySplit.comma.map((el) => {\n      if (/(\\s+and\\s+)/g.test(el)) {\n        return el.split(/(\\s+and\\s+)/g).filter((x) => {\n          return !(/(\\s+and\\s+)/g.test(x))\n        })\n      } else {\n        return false\n      }\n    }).filter((x) => {\n      return x !== false\n    })\n\n    // If the query contains the word 'or', split at 'or' (see regex).\n    // Filter over to remove indexes with (just) the word 'or',\n    // because I want the words surround the 'or', not the 'or'.\n    // Finally, remove indexes that contain 'false'.\n    this.querySplit.or = this.querySplit.comma.map((el) => {\n      if (/(\\s+or\\s+)/g.test(el)) {\n        return el.split(/(\\s+or\\s+)/g).filter((x) => {\n          return !(/(\\s+or\\s+)/g.test(x))\n        })\n      } else {\n        return false\n      }\n    }).filter((x) => {\n      return x !== false\n    })\n\n    // If the query does not contains the words 'or' or \"and (see regex),\n    // include it as a single query.\n    // Finally, remove indexes that contain 'false'.\n    this.querySplit.single = this.querySplit.comma.map((el) => {\n      if (!(/(\\s+and\\s+)/g.test(el)) && !(/(\\s+or\\s+)/g.test(el))) {\n        return el\n      } else {\n        return false\n      }\n    }).filter((x) => {\n      return x !== false\n    })\n\n    this.querySplit.all = [].concat(this.querySplit.single, this.querySplit.and, this.querySplit.or)\n\n    return this.DOMFilterTables()\n  },\n  groupQueryElements () {\n    // Return each listing's element.children.\n    const allListingGroups = this.listingGroup.map((element) => {\n      return Array.from(element.children)\n    })\n\n    // Map through all arrays of arrays, etc., returning a consolidated array of all listing rows on the page.\n    return allListingGroups.map((element) => {\n      return element.map((element) => {\n        return this.queryElementList.push(element)\n      })\n    })\n  },\n  listingGroupAccordion (event) {\n    let element = ''\n    // I'm making an assumption that the header will be an adjacent sibling\n    // to the table and that the clickable element will be a header or a button.\n    if (event.target.nodeName === 'BUTTON') {\n      element = event.target.parentNode\n    } else if (event.target.nodeName === 'H3') {\n      element = event.target\n    } else {\n      return false\n    }\n    // Toggle the listing group header classes.\n    element.classList.toggle('listingGroup-header-isExpanded')\n    element.classList.toggle('listingGroup-header-isCollapsed')\n    // Toggle the listing group classes & states.\n    element.nextElementSibling.hidden ? element.nextElementSibling.removeAttribute('hidden') : element.nextElementSibling.hidden = 'true'\n    element.nextElementSibling.classList.toggle('listingGroup-isExpanded')\n    element.nextElementSibling.classList.toggle('listingGroup-isCollapsed')\n  },\n  saveQuoteAndRedirect () {\n    // Called from an event listener; use global scope.\n    function getCheckboxQuote () {\n      // Create a list of all checked listing checkboxes.\n      const checked = listing.listingCheckbox.filter((el) => {\n        return el.checked\n      })\n      const quote = []\n\n      // Map over checked list and set values to localStorage.\n      checked.map((el) => {\n        quote.push(el.parentNode.querySelector('.header-name').innerText.trim())  // Query the target directly, so as to not occasionaly capture the innerText of \"Checkbox\".\n      })\n\n      return quote\n    }\n    const quote = getCheckboxQuote()\n\n    localStorage.setItem('quote', JSON.stringify(quote))\n\n    window.location.href = '/ordering/'\n  },\n  DOMSearchGroupState () {\n    this.helperTextNode.classList.remove('helperText-isInserted')\n\n    if (this.input.value === '') {\n      this.filterSearchButton.style.background = 'hsla(120, 55.6%, 28.2%, .4)'\n      this.helperTextNode.innerHTML = `<p>try \"iced and fruit\", or \"organic and iced, china or germany\"</p>`\n      // this.helperTextNode.innerHTML = `<p>This will search through any text in the listing below. You can make complex searches: \"iced and fruit\", or \"organic and iced, china or germany\". But you must separate \"and\" and \"or\" with a comma.</p>`\n      this.helperTextNode.classList.add('helperText-isInserted')\n      return this.filterParse('')\n    } else {\n      this.filterSearchButton.style.background = 'hsla(120, 55.6%, 28.2%, 1)'\n      return\n    }\n  },\n  DOMFilterHelperText () {\n    // Fetch the count of filtered results.\n    const count = this.countFilteredResults()\n    // const helperTextNode = document.querySelector('.filter-helperText')\n    const resultNodeContextual = this.input.value ? `for \"${this.input.value}\"` : `shown`\n\n    this.helperTextNode.classList.remove('helperText-isInserted')\n\n    if (count.matched === 0) {\n      // If we're on the Master Product List and don't find a result...\n      if (document.location.pathname.endsWith('master-product-list/')) {\n        this.helperTextNode.innerHTML = `<p>Sorry, there don't seem to be any teas with those characteristics. If you'd like help, you can always call GS Haly using the contact information <a href=\"#footer\">in the footer</a>.</p>`\n        return this.helperTextNode.classList.add('helperText-isInserted')\n      } else {\n        this.helperTextNode.innerHTML = `<p>Sorry, there don't seem to be any teas with those characteristics. You can always search the <a href=\"../\">Master Product List</a>.</p>`\n        return this.helperTextNode.classList.add('helperText-isInserted')\n      }\n    }\n\n    if (this.input.value === '') {\n      this.helperTextNode.innerHTML = `<p>try \"iced and fruit\", or \"organic and iced, china or germany\"</p>`\n      // this.helperTextNode.innerHTML = `<p>This will search through any text in the listing below. You can make complex searches: \"iced and fruit\", or \"organic and iced, china or germany\". But you must separate \"and\" and \"or\" with a comma.</p>`\n      return this.helperTextNode.classList.add('helperText-isInserted')\n    } else {\n      this.helperTextNode.innerHTML = `<p>${count.matched} of ${count.total} results ${resultNodeContextual}</p>`\n      return this.helperTextNode.classList.add('helperText-isInserted')\n    }\n  },\n  DOMFilterTables () {\n    // Start with a fresh slate (all rows unhidden).\n    // Necessary because filter functions are destructive only so that one filter\n    // may run, and another run after it to further reduce the visible rows.\n    this.queryElementList.map((el) => {\n      return el.classList.remove('listing-isHidden')\n    })\n\n    // Only run the single query if there's a single query.\n    if (this.querySplit.single.length) {\n      this.queryElementList.map((element) => {\n        // Set a temporary array to push this element's results into.\n        const queryFound = []\n        // Set searchable inner text to same case as query string.\n        const conditionedInnerText = element.innerText.toLowerCase()\n        // Map searchable 'data-filter' attributes into array.\n        const queryDataFilter = Array.from(element.querySelectorAll('[data-filter]')).map((element) => {\n          return element.dataset.filter.toLowerCase()\n        })\n\n        queryFound.push(queryDataFilter.some(el => el.includes(this.querySplit.single)))\n\n        queryFound.push(conditionedInnerText.includes(this.querySplit.single))\n\n        if (queryFound.indexOf(true) < 0) {\n          return element.classList.add('listing-isHidden')\n        } else {\n          return\n        }\n      })\n    }\n\n    // Only run the AND query if there's an AND query.\n    if (this.querySplit.and.length) {\n      this.queryElementList.map((element) => {\n        // Set a temporary object to push this element's results into.\n        const queryFound = {}\n        // Create separate results array, because I later iterate over enumberables in queryFound.\n        const results = []\n        // Set searchable inner text to same case as query string.\n        const conditionedInnerText = element.innerText.toLowerCase()\n        // Map searchable 'data-filter' attributes into array.\n        const queryDataFilter = Array.from(element.querySelectorAll('[data-filter]')).map((element) => {\n          return element.dataset.filter.toLowerCase()\n        })\n\n        // Map over split query.\n        this.querySplit.and.map((queryStrings) => {\n          // Map over each query string.\n          queryStrings.map((queryString) => {\n            // Temporary array to store results.\n            // First push the results of the inner text search.\n            const results = []\n            results.push(conditionedInnerText.includes(queryString))\n\n            // Map over the dataFilter terms. May not be present and varies in length.\n            // Push into results array (after inner text search results).\n            queryDataFilter.map((dataFilterTerm) => {\n              return results.push(dataFilterTerm.includes(queryString))\n            })\n            // Separated in an object by query terms and grouped into an array by results.\n            queryFound[queryString] = results\n            return queryFound\n          })\n        })\n\n        // Parse and evalute what a match for AND looks like, pushing results into the queryFound object.\n        // AND will push true if query has been found (true in array) per search term in text and dataFilter.\n        // AND should be a flattened array of true, since each of the terms should have been found\n        // either in the inner text or dataFilter.\n        for (const property in queryFound) {\n          // Push the found/not found boolean (per query-term namespace) into queryFound.results.\n          if (queryFound[property].indexOf(true) > -1) {\n            results.push(true)\n          } else {\n            results.push(false)\n          }\n        }\n\n        // Hide the elements in which false is found.\n        if (results.indexOf(false) > -1) {\n          return element.classList.add('listing-isHidden')\n        } else {\n          return\n        }\n      })\n    }\n\n    // Only run the OR query if there's an OR query.\n    if (this.querySplit.or.length) {\n      this.queryElementList.map((element) => {\n        // Set a temporary object to push this element's results into.\n        const queryFound = {}\n        // Create separate results array, because I later iterate over enumberables in queryFound.\n        const results = []\n        // Set searchable inner text to same case as query string.\n        const conditionedInnerText = element.innerText.toLowerCase()\n        // Map searchable 'data-filter' attributes into array.\n        const queryDataFilter = Array.from(element.querySelectorAll('[data-filter]')).map((element) => {\n          return element.dataset.filter.toLowerCase()\n        })\n\n        // Map over split query.\n        this.querySplit.or.map((queryStrings) => {\n          // Map over each query string.\n          queryStrings.map((queryString) => {\n            // Temporary array to store results.\n            // First push the results of the inner text search.\n            const results = []\n            results.push(conditionedInnerText.includes(queryString))\n\n            // Map over the dataFilter terms. May not be present and varies in length.\n            // Push into results array (after inner text search results).\n            queryDataFilter.map((dataFilterTerm) => {\n              return results.push(dataFilterTerm.includes(queryString))\n            })\n            // Separated in an object by query terms and grouped into an array by results.\n            queryFound[queryString] = results\n            return queryFound\n          })\n        })\n\n        // Parse and evalute what a match for OR looks like, pushing results into the queryFound object.\n        // OR will push true if query has been found (true in array) per search term in text and dataFilter.\n        // OR should be a flattened array of at least one true, since any of the terms can be found\n        // either in the inner text or dataFilter.\n        for (const property in queryFound) {\n          // Push the found/not found boolean (per query-term namespace) into queryFound.results.\n          if (queryFound[property].indexOf(true) > -1) {\n            results.push(true)\n          } else {\n            results.push(false)\n          }\n        }\n\n        // Hide the elements in which true is not found.\n        if (results.indexOf(true) < 0) {\n          return element.classList.add('listing-isHidden')\n        } else {\n          return\n        }\n      })\n    }\n\n    // Hide listing groups who's listings don't have any content showing.\n    // Get the count of listings per listing group, then the hidden listings per group.\n    // Compare the lengths, then hide the parent node (the listing group wrap).\n    // Only do this on the Master Product Listing\n    if (window.location.pathname.endsWith('master-product-list/')) {\n      this.listingGroup.map((el) => {\n        const listingCount = el.children.length\n        const hiddenListings = Array.from(el.children).filter((el) => {\n          return el.classList.contains('listing-isHidden')\n        })\n\n        if (listingCount === hiddenListings.length) {\n          return el.parentNode.classList.add('listingGroup-isHidden')\n        } else {\n          return el.parentNode.classList.remove('listingGroup-isHidden')\n        }\n      })\n    }\n\n    this.DOMSyncronizeCheckboxWithFilter()\n    return this.DOMFilterHelperText()\n  },\n  // Called from an event handler, so using global scope.\n  DOMQuoteCheckbox (event) {\n    // Event delegation was used to target the listing group instead of each checkbox.\n    // Exit function if the click wasn't on the input (or label, which maps to the input).\n    if (event && event.target.nodeName !== 'INPUT') {\n      return\n    } else {\n      // For counting, get all the checked checkboxes.\n      const length = listing.countCheckedListingCheckboxes()\n\n      // Remove the animation class if it's on from a previous length limit.\n      listing.quoteButton.classList.remove('isFull')\n      // Set inner text to show reflect number of checked.\n      listing.quoteButton.innerText = `Request a Quote ${length}/5`\n\n      // TODO: This is an idea for filtering by checked state. It's not a quick addition, because the product list is indexed on load, and not updated. An idea to implement this would be to have a checkbox pop up in the helper text (once there are some checkd boxes) that gives the option of \"show only selected items\". I could then run a filter to add the hidden class to all listing items not checked.\n      // if (event) {\n      //   event.target.checked ? event.target.parentElement.dataset.checked = 'checked selected' : event.target.parentElement.dataset.checked = ''\n      // }\n\n      if (length >= 5) {\n        // Disable all other checkboxes.\n        listing.listingCheckbox.map((el) => {\n          el.checked ? el.disabled = false : el.disabled = true\n        })\n        // Let the user know it's time to request a quote.\n        listing.quoteButton.classList.add('isFull')\n      } else {\n        listing.listingCheckbox.map((el) => {\n          el.disabled = false\n        })\n      }\n      // DOM doesn't retrigger animation unless element is reinserted (layout shift).\n      // Clone (deep) & reinsert button.\n      const el = document.querySelector('.quote-button')\n      const clone = listing.quoteButton.cloneNode(true)\n      el.parentNode.replaceChild(clone, el)\n      clone.addEventListener('click', listing.saveQuoteAndRedirect)\n      // Make sure quote button is properly positioned.\n      return listing.DOMScrollElements()\n    }\n  },\n  // Handles monitoring the position of DOM elements and applying classes for fixed scroll.\n  DOMScrollElements () {\n    const currentDistanceToPageTop = window.scrollY\n\n    if (currentDistanceToPageTop >= this.quoteButtonOffset.top) {\n      return document.querySelector('.quote-button').classList.add('fixed')  // needs to be freshly querired, for some reason\n    } else {\n      return document.querySelector('.quote-button').classList.remove('fixed')  // needs to be freshly querired, for some reason\n    }\n  },\n  // Syncronize the checkbox and filter input.\n  DOMSyncronizeCheckboxWithFilter () {\n    // Get a flat array of all query terms for strict matching.\n    const eachQueryFlat = this.querySplit.all.reduce((a, b) => {\n      return a.concat(b)\n    }, [])\n    // Map over all checkboxes and over the flat query array.\n    // Test against the data-filter value and set the checkbox based on the result.\n    return this.filterCheckbox.map((el) => {\n      const regexp = new RegExp(`^${el.dataset.filter}`)\n      const contains = eachQueryFlat.map((el) => {\n        return regexp.test(el)\n      })\n      contains.includes(true) ? el.checked = true : el.checked = false\n    })\n  },\n  init () {\n    this.additionalInformationButtons = Array.from(document.querySelectorAll('.description-accordion-control'))\n    this.feedbackNode = document.createElement('p')\n    // Filter checkboxes, used to...filter.\n    this.filterCheckbox = Array.from(document.getElementsByClassName('filter-checkbox-native'))\n    this.filterForm = document.querySelector('.main-filter')\n    this.filterSearchButton = document.querySelector('.filter-searchButton')\n    this.helperTextNode = document.querySelector('.filter-helperText')\n    // Used to add event listener to filter input.\n    this.input = document.querySelector('.filter-input')\n    this.inputClearButton = document.querySelector('.filter-input-clearButton')\n    this.listingGroup = Array.from(document.getElementsByClassName('listingGroup'))\n    this.listingGroupHeader = Array.from(document.getElementsByClassName('listingGroup-header'))\n    this.listingCheckbox = Array.from(document.getElementsByClassName('listing-checkbox-native'))\n    // Array of booleans for determining if the query string was found in the search context.\n    this.queryElementList = []\n    this.querySplit = {}\n    this.quoteButton = document.querySelector('.quote-button')\n    this.quoteButtonOffset = {}\n    this.sidebarNav = document.querySelectorAll('.nav-listingType a')\n\n    addEventToArray({\n      event: 'click',\n      arr: this.additionalInformationButtons\n    }, this.additionalInformationControl)\n    // When table headers are clicked (targeted by classname), toggle the collapsed / expanded class name.\n    // Expanded by default.\n    addEventToArray({\n      event: 'click',\n      arr: this.listingGroupHeader\n    }, this.listingGroupAccordion)\n\n    addEventToArray({\n      event: 'change',\n      arr: this.filterCheckbox\n    }, this.checkboxFilter)\n\n    addEventToArray({\n      event: 'click',\n      arr: this.listingGroup\n    }, this.DOMQuoteCheckbox)\n\n    this.quoteButtonOffset.top = document.querySelector('.quote-button').getBoundingClientRect().top + window.scrollY\n    // this.sidebarOffset.top = document.querySelector('.sidebar-wrap').getBoundingClientRect().top + window.scrollY\n\n    window.addEventListener('scroll', throttle(this.DOMScrollElements, 100, this))\n\n    this.filterForm.addEventListener('submit', function (e) {\n      e.preventDefault()\n      return this.filterParse(this.input.value)\n    }.bind(this))\n\n    // When focused upon, set the state.\n    this.input.addEventListener('focus', this.DOMSearchGroupState.bind(this))\n\n    // Fire quote function when button is clicked.\n    this.quoteButton.addEventListener('click', this.saveQuoteAndRedirect)\n\n    // Group all query elements into their respective master arrays.\n    this.groupQueryElements()\n\n    // Set active class on sidebar nav.\n    setActivePage(this.sidebarNav)\n\n    // Check / set quote button inner text & position (in case of back button from ordering form).\n    this.DOMQuoteCheckbox()\n  }\n}\n\nexport default listing\n","/* eslint-env browser */\n/* global ga */\n'use strict'\nconst form = {\n  // Set the value from localStorage into the textbox and clear localStorage.\n  DOMSetProducts () {\n    const products = JSON.parse(localStorage.getItem('quote'))\n    const baseText = `${products}`\n    const formattedText = baseText.replace(/,/g, ',\\n')\n\n    // Set value of textarea only if there's a value (in case of page refresh).\n    if (products !== null) {\n      this.products.value = formattedText\n    }\n\n    localStorage.removeItem('quote')\n  },\n  navigatorStatus () {\n    if (navigator.onLine) {\n      form.button.innerText = 'send request'\n      form.button.disabled = false\n      form.button.classList.remove('button-isDisabled')\n    } else {\n      form.button.innerText = 'offline'\n      form.button.disabled = true\n      form.button.classList.add('button-isDisabled')\n    }\n  },\n  sendFormData () {\n    const AJAX = new XMLHttpRequest()\n    const payload = new FormData(this.orderingForm)\n\n    AJAX.addEventListener('load', function (e) {\n      if (e.target.status === 200) {\n        form.button.innerText = 'request sent'\n        ga('send', 'event', {  // since GA is loaded in the head, assume its presence\n          eventCategory: 'Form',\n          eventAction: 'send'\n        })\n        return form.orderingForm.reset()\n      } else {\n        ga('send', 'exception', {  // since GA is loaded in the head, assume its presence\n          'exDescription': 'form send failure'\n        })\n        form.button.innerText = 'error in sending'\n      }\n    })\n\n    AJAX.open('POST', this.endpoint, true)\n    AJAX.send(payload)\n  },\n  init () {\n    this.button = document.querySelector('.form-button')\n    this.orderingForm = document.querySelector('.orderingForm')\n    this.products = document.querySelector('.form-products')\n    this.endpoint = 'https://gshaly.com/webhook/form-mail/'\n\n    this.orderingForm.addEventListener('submit', function (e) {  // Not sure why, but this cannot be a function reference (or else the AXAJ path is wrong). I have to prevent the default here and invoke the sendFormDatat() function in this anonymous function.\n      e.preventDefault()\n      form.sendFormData()\n    })\n\n    window.addEventListener('online', this.navigatorStatus)\n    window.addEventListener('offline', this.navigatorStatus)\n\n    this.DOMSetProducts()\n  }\n}\n\nconst FAQ = {\n  // Use global scope for event listener.\n  DOMFAQAccordion (event) {\n    if (event.target.nodeName !== 'A') {\n      return\n    }\n    FAQ.FAQHeaders.map((el) => {\n      el.classList.add('FAQ-header-isCollapsed')\n      return el.nextElementSibling.classList.add('FAQ-isHidden')\n    })\n    event.target.parentElement.classList.remove('FAQ-header-isCollapsed')\n    event.target.parentElement.nextElementSibling.classList.remove('FAQ-isHidden')\n    event.target.parentElement.nextElementSibling.classList.add('FAQ-isExpanded')\n  },\n  init () {\n    this.FAQ = document.querySelector('.aside-FAQ')\n    this.FAQHeaders = Array.from(document.getElementsByTagName('dt'))\n\n    this.FAQ.addEventListener('click', this.DOMFAQAccordion)\n\n    // Initially, set hidden on all FAQ items but the first.\n    this.FAQHeaders.map((el, idx) => {\n      if (idx > 0) {\n        el.nextElementSibling.classList.add('FAQ-isHidden')\n        return el.classList.add('FAQ-header-isCollapsed')\n      }\n    })\n  }\n}\n\nexport {\n  form,\n  FAQ\n}\n","/* eslint-env browser */\n\n// Robert Penner's easeInOutQuad: http://robertpenner.com/easing/\nconst easeInOutQuad = (t, b, c, d) => {\n  t /= d / 2\n  if (t < 1) return c / 2 * t * t + b\n  t--\n  return -c / 2 * (t * (t - 2) - 1) + b\n}\n\n// https://github.com/callmecavs/jump.js\nconst jumper = () => {\n  // private variable cache\n  // no variables are created during a jump, preventing memory leaks\n\n  let element         // element to scroll to                   (node)\n\n  let start           // where scroll starts                    (px)\n  let stop            // where scroll stops                     (px)\n\n  let offset          // adjustment from the stop position      (px)\n  let easing          // easing function                        (function)\n  let a11y            // accessibility support flag             (boolean)\n\n  let distance        // distance of scroll                     (px)\n  let duration        // scroll duration                        (ms)\n\n  let timeStart       // time scroll started                    (ms)\n  let timeElapsed     // time spent scrolling thus far          (ms)\n\n  let next            // next scroll position                   (px)\n\n  let callback        // to call when done scrolling            (function)\n\n  // scroll position helper\n\n  function location () {\n    return window.scrollY || window.pageYOffset\n  }\n\n  // element offset helper\n\n  function top (element) {\n    return element.getBoundingClientRect().top + start\n  }\n\n  // rAF loop helper\n\n  function loop (timeCurrent) {\n    // store time scroll started, if not started already\n    if (!timeStart) {\n      timeStart = timeCurrent\n    }\n\n    // determine time spent scrolling so far\n    timeElapsed = timeCurrent - timeStart\n\n    // calculate next scroll position\n    next = easing(timeElapsed, start, distance, duration)\n\n    // scroll to it\n    window.scrollTo(0, next)\n\n    // check progress\n    timeElapsed < duration\n      ? requestAnimationFrame(loop)       // continue scroll loop\n      : done()                            // scrolling is done\n  }\n\n  // scroll finished helper\n\n  function done () {\n    // account for rAF time rounding inaccuracies\n    window.scrollTo(0, start + distance)\n\n    // if scrolling to an element, and accessibility is enabled\n    if (element && a11y) {\n      // add tabindex indicating programmatic focus\n      element.setAttribute('tabindex', '-1')\n\n      // focus the element\n      element.focus()\n    }\n\n    // if it exists, fire the callback\n    if (typeof callback === 'function') {\n      callback()\n    }\n\n    // reset time for next jump\n    timeStart = false\n  }\n\n  // API\n\n  function jump (target, options = {}) {\n    // resolve options, or use defaults\n    duration = options.duration || 1000\n    offset = options.offset || 0\n    callback = options.callback                       // \"undefined\" is a suitable default, and won't be called\n    easing = options.easing || easeInOutQuad\n    a11y = options.a11y || false\n\n    // cache starting position\n    start = location()\n\n    // resolve target\n    switch (typeof target) {\n      // scroll from current position\n      case 'number':\n        element = undefined           // no element to scroll to\n        a11y = false               // make sure accessibility is off\n        stop = start + target\n        break\n\n      // scroll to element (node)\n      // bounding rect is relative to the viewport\n      case 'object':\n        element = target\n        stop = top(element)\n        break\n\n      // scroll to element (selector)\n      // bounding rect is relative to the viewport\n      case 'string':\n        element = document.querySelector(target)\n        stop = top(element)\n        break\n    }\n\n    // resolve scroll distance, accounting for offset\n    distance = stop - start + offset\n\n    // resolve duration\n    switch (typeof options.duration) {\n      // number in ms\n      case 'number':\n        duration = options.duration\n        break\n\n      // function passed the distance of the scroll\n      case 'function':\n        duration = options.duration(distance)\n        break\n    }\n\n    // start the loop\n    requestAnimationFrame(loop)\n  }\n\n  // expose only the jump method\n  return jump\n}\n\n// export singleton\n\nconst singleton = jumper()\n\nexport default singleton\n","const timeline = {\n  keyboardParse (e) {\n    if (e.keyCode === 39 || e.keyCode === 40 || e.keyCode === 32) {  // forward (right, down, space)\n      e.preventDefault()\n      return this.navigate(true)\n    } else if (e.keyCode === 37 || e.keyCode === 38) {  // back (left, up)\n      e.preventDefault()\n      return this.navigate(false)\n    } else if (e.keyCode === 27) {  // exit (esc)\n      e.preventDefault()\n      return this.navigate()\n    } else {\n      return\n    }\n  },\n  navigate (forward = null) {\n    const context = document.querySelector(window.location.hash)\n\n    if (forward) {\n      window.location.href = context.querySelector('.arrow-next').href\n    } else if (forward === false) {\n      window.location.href = context.querySelector('.arrow-previous').href\n    } else {\n      window.location.href = '../'\n    }\n  },\n  init () {\n    this.anchorList = [...document.querySelectorAll('a[href^=\"#\"]')]\n    this.slideList = document.querySelectorAll('section')\n    this.fullscreenWrap = document.querySelector('.fullscreen-wrap')\n\n    // If JavaScript is working, add this style to the fullscreen-wrap element to prevent scrolling.\n    this.fullscreenWrap.style.overflow = 'hidden'\n\n    const sectionChildren = Array.from(this.slideList).filter(e => !(e.id.includes('cover-')))\n    const addTransitions = function (parent, toggle) {\n      const parts = parent.querySelectorAll('.timeline-text, .timeline-image')\n      if (toggle === 0) {  // even; toggle allows for the image / text order switching on larger viewports\n        parts[1].classList.add('fadeInLeft')\n        parts[0].classList.add('fadeInRight')\n      } else {\n        parts[0].classList.add('fadeInLeft')\n        parts[1].classList.add('fadeInRight')\n      }\n      parts[0].style.opacity = 1\n      parts[1].style.opacity = 1\n      return\n    }\n\n    const removeTransitions = function (parent) {\n      const parts = parent.querySelectorAll('.timeline-text, .timeline-image')\n      parts[0].style.opacity = 0\n      parts[1].style.opacity = 0\n      parts[0].classList.remove('fadeInLeft', 'fadeInRight')\n      parts[1].classList.remove('fadeInLeft', 'fadeInRight')\n      return\n    }\n\n    const setTransitions = function () {\n      sectionChildren.map((e, i) => {\n        if (window.location.hash === `#${e.id}`) {\n          return addTransitions(e, i % 2)\n        } else {\n          return removeTransitions(e)\n        }\n      })\n    }\n    // TODO: loading with a hash already in the URL doesn't fire 'hashchange', causing the animation not to fire\n    window.addEventListener('hashchange', setTransitions.bind(this))\n\n    window.addEventListener('keydown', this.keyboardParse.bind(this), true)\n    window.addEventListener('keypress', this.keyboardParse.bind(this), true)\n  }\n}\n\nexport default timeline\n\n","import { setActivePage, insertAfter, throttle } from './utility.js'\n\nconst teaKnowledge = {\n  DOMNavPosition () {\n    const currentDistanceToPageTop = window.scrollY\n\n    if (currentDistanceToPageTop >= this.navOffset.top) {\n      return document.querySelector('.teaKnowledge-nav-wrap').classList.add('fixed')  // needs to be freshly querired, for some reason\n    } else {\n      return document.querySelector('.teaKnowledge-nav-wrap').classList.remove('fixed')  // needs to be freshly querired, for some reason\n    }\n  },\n  generateTableOfContents () {\n    const activeLink = document.querySelector('.teaKnowledge-sectionNav>.active')\n    const list = document.createElement('ol')\n    const contentHeaders = document.querySelectorAll('section>h2')\n    let innerHTML = ``\n\n    ;[...contentHeaders].map((e) => {  // Build the link content.\n      innerHTML += `<li class=\"teaKnowledge-tableOfContents\"><a href=\"#${e.id}\">${e.innerText}</a></li>`\n    })\n\n    list.innerHTML = innerHTML\n\n    insertAfter(list, activeLink)  // Insert the table of contents.\n  },\n  init () {\n    this.sidebarNav = document.querySelectorAll('.teaKnowledge-nav a')\n    this.navOffset = {}\n\n    setActivePage(this.sidebarNav)\n    this.generateTableOfContents()\n\n    this.navOffset.top = document.querySelector('.teaKnowledge-nav-wrap').getBoundingClientRect().top + window.scrollY\n\n    window.addEventListener('scroll', throttle(this.DOMNavPosition, 100, this))\n  }\n}\n\nexport default teaKnowledge\n","/* eslint-env browser */\nimport { addEventToArray, setActivePage, determinePage } from './module/utility'\nimport masterProductList from './module/masterProductList'\nimport * as ordering from './module/ordering'\nimport scroll from './module/scroll'\nimport timeline from './module/timeline'\nimport teaKnowledge from './module/teaKnowledge'\n\nconst docReady = function (callback) {\n  if (document.readyState !== 'loading') {\n    return callback()\n  } else {\n    return document.addEventListener('DOMContentLoaded', callback)\n  }\n}\n\nconst setSmoothScrollOnAllHash = function () {\n  // Get all links on the page with the hash property (mostly internal links).\n  const links = Array.from(document.getElementsByTagName('a')).filter(el => el.hash)\n  addEventToArray({\n    event: 'click',\n    arr: links\n  }, (event) => {\n    // event.preventDefault()\n    scroll(event.target.hash, {\n      duration: 250,\n      offset: -16\n    })\n  })\n}\n\nconst polyfill = function () {\n  // Production steps of ECMA-262, Edition 6, 22.1.2.1\n  if (!Array.from) {\n    Array.from = (function () {\n      var toStr = Object.prototype.toString\n      var isCallable = function (fn) {\n        return typeof fn === 'function' || toStr.call(fn) === '[object Function]'\n      }\n      var toInteger = function (value) {\n        var number = Number(value)\n        if (isNaN(number)) { return 0 }\n        if (number === 0 || !isFinite(number)) { return number }\n        return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number))\n      }\n      var maxSafeInteger = Math.pow(2, 53) - 1\n      var toLength = function (value) {\n        var len = toInteger(value)\n        return Math.min(Math.max(len, 0), maxSafeInteger)\n      }\n\n      // The length property of the from method is 1.\n      return function from (arrayLike/*, mapFn, thisArg */) {\n        // 1. Let C be the this value.\n        var C = this\n\n        // 2. Let items be ToObject(arrayLike).\n        var items = Object(arrayLike)\n\n        // 3. ReturnIfAbrupt(items).\n        if (arrayLike == null) {\n          throw new TypeError('Array.from requires an array-like object - not null or undefined')\n        }\n\n        // 4. If mapfn is undefined, then let mapping be false.\n        var mapFn = arguments.length > 1 ? arguments[1] : void undefined\n        var T\n        if (typeof mapFn !== 'undefined') {\n          // 5. else\n          // 5. a If IsCallable(mapfn) is false, throw a TypeError exception.\n          if (!isCallable(mapFn)) {\n            throw new TypeError('Array.from: when provided, the second argument must be a function')\n          }\n\n          // 5. b. If thisArg was supplied, let T be thisArg; else let T be undefined.\n          if (arguments.length > 2) {\n            T = arguments[2]\n          }\n        }\n\n        // 10. Let lenValue be Get(items, \"length\").\n        // 11. Let len be ToLength(lenValue).\n        var len = toLength(items.length)\n\n        // 13. If IsConstructor(C) is true, then\n        // 13. a. Let A be the result of calling the [[Construct]] internal method\n        // of C with an argument list containing the single item len.\n        // 14. a. Else, Let A be ArrayCreate(len).\n        var A = isCallable(C) ? Object(new C(len)) : new Array(len)\n\n        // 16. Let k be 0.\n        var k = 0\n        // 17. Repeat, while k < len… (also steps a - h)\n        var kValue\n        while (k < len) {\n          kValue = items[k]\n          if (mapFn) {\n            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k)\n          } else {\n            A[k] = kValue\n          }\n          k += 1\n        }\n        // 18. Let putStatus be Put(A, \"length\", len, true).\n        A.length = len\n        // 20. Return A.\n        return A\n      }\n    }())\n  }\n\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  if (!Array.prototype.includes) {\n    Object.defineProperty(Array.prototype, 'includes', {\n      value: function (searchElement, fromIndex) {\n        // 1. Let O be ? ToObject(this value).\n        if (this == null) {\n          throw new TypeError('\"this\" is null or not defined')\n        }\n\n        var o = Object(this)\n\n        // 2. Let len be ? ToLength(? Get(O, \"length\")).\n        var len = o.length >>> 0\n\n        // 3. If len is 0, return false.\n        if (len === 0) {\n          return false\n        }\n\n        // 4. Let n be ? ToInteger(fromIndex).\n        //    (If fromIndex is undefined, this step produces the value 0.)\n        var n = fromIndex | 0\n\n        // 5. If n ≥ 0, then\n        //  a. Let k be n.\n        // 6. Else n < 0,\n        //  a. Let k be len + n.\n        //  b. If k < 0, let k be 0.\n        var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0)\n\n        // 7. Repeat, while k < len\n        while (k < len) {\n          // a. Let elementK be the result of ? Get(O, ! ToString(k)).\n          // b. If SameValueZero(searchElement, elementK) is true, return true.\n          // c. Increase k by 1.\n          // NOTE: === provides the correct \"SameValueZero\" comparison needed here.\n          if (o[k] === searchElement) {\n            return true\n          }\n          k++\n        }\n\n        // 8. Return false\n        return false\n      }\n    })\n  }\n\n  if (!String.prototype.includes) {\n    String.prototype.includes = function (search, start) {\n      'use strict'\n      if (typeof start !== 'number') {\n        start = 0\n      }\n\n      if (start + search.length > this.length) {\n        return false\n      } else {\n        return this.indexOf(search, start) !== -1\n      }\n    }\n  }\n\n  if (!String.prototype.endsWith) {\n    String.prototype.endsWith = function (searchString, position) {\n      var subjectString = this.toString()\n      if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n        position = subjectString.length\n      }\n      position -= searchString.length\n      var lastIndex = subjectString.lastIndexOf(searchString, position)\n      return lastIndex !== -1 && lastIndex === position\n    }\n  }\n}\n\nconst siteInit = function () {\n  // Polyfills.\n  polyfill()\n\n  // Init modules of code specific to page.\n  if (determinePage('company-history', true)) {\n    timeline.init()\n  }\n  if (determinePage('master-product-list', true)) {\n    masterProductList.init()\n  }\n  if (determinePage('ordering', true)) {\n    ordering.form.init()\n    ordering.FAQ.init()\n  }\n  if (determinePage('tea-knowledge', true)) {\n    teaKnowledge.init()\n  }\n\n  // Set section nav active link.\n  setActivePage(document.querySelectorAll('.section-nav a'))\n\n  // Set smooth scrolling default on all page links.\n  setSmoothScrollOnAllHash()\n}\n\nif ('serviceWorker' in navigator) {\n  // The service worker cannot access parent directories (apart from explicity setting scope), so keep it in the root directory.\n  navigator.serviceWorker.register('/service-worker.js').then(function (registration) {\n    console.log(`ServiceWorker registration successful with scope: ${registration.scope}`)\n  }).catch(function (e) {\n    console.log(`ServiceWorker registration failed: ${e}`)\n  })\n}\n\ndocReady(siteInit)\n"],"names":["addEventToArray","configObj","callback","event","arr","map","index","addEventListener","throttle","fn","threshhold","scope","last","deferTimer","context","now","Date","args","arguments","setTimeout","apply","insertAfter","newNode","referenceNode","parentNode","insertBefore","nextElementSibling","setActivePage","nodeList","nodeArray","Array","from","workingURL","pathname","document","location","hash","length","element","href","endsWith","classList","add","remove","determinePage","pageName","permissive","window","includes","listing","e","text","getElementById","target","getAttribute","toggle","contains","innerText","setAttribute","input","value","filterAND","filterCheckbox","filter","el","checked","dataset","filterOR","query","DOMSearchGroupState","filterParse","quote","listingCheckbox","count","total","queryElementList","unmatched","getElementsByClassName","matched","queryString","conditionedQueryString","trim","toLowerCase","querySplit","comma","split","x","and","test","or","single","all","concat","DOMFilterTables","allListingGroups","listingGroup","children","push","nodeName","hidden","removeAttribute","getCheckboxQuote","querySelector","setItem","JSON","stringify","helperTextNode","filterSearchButton","style","background","innerHTML","countFilteredResults","resultNodeContextual","queryFound","conditionedInnerText","queryDataFilter","querySelectorAll","some","indexOf","results","queryStrings","dataFilterTerm","property","listingCount","hiddenListings","DOMSyncronizeCheckboxWithFilter","DOMFilterHelperText","countCheckedListingCheckboxes","quoteButton","disabled","clone","cloneNode","replaceChild","saveQuoteAndRedirect","DOMScrollElements","currentDistanceToPageTop","scrollY","quoteButtonOffset","top","eachQueryFlat","reduce","a","b","regexp","RegExp","additionalInformationButtons","feedbackNode","createElement","filterForm","inputClearButton","listingGroupHeader","sidebarNav","additionalInformationControl","listingGroupAccordion","checkboxFilter","DOMQuoteCheckbox","getBoundingClientRect","preventDefault","bind","groupQueryElements","form","products","parse","localStorage","getItem","baseText","formattedText","replace","removeItem","navigator","onLine","button","AJAX","XMLHttpRequest","payload","FormData","orderingForm","status","reset","open","endpoint","send","sendFormData","navigatorStatus","DOMSetProducts","FAQ","FAQHeaders","parentElement","getElementsByTagName","DOMFAQAccordion","idx","easeInOutQuad","t","c","d","jumper","start","stop","offset","easing","a11y","distance","duration","timeStart","timeElapsed","next","pageYOffset","loop","timeCurrent","scrollTo","requestAnimationFrame","done","focus","jump","options","undefined","singleton","timeline","keyCode","navigate","forward","anchorList","slideList","fullscreenWrap","overflow","sectionChildren","id","addTransitions","parent","parts","opacity","removeTransitions","setTransitions","i","keyboardParse","teaKnowledge","navOffset","activeLink","list","contentHeaders","generateTableOfContents","DOMNavPosition","docReady","readyState","setSmoothScrollOnAllHash","links","polyfill","toStr","Object","prototype","toString","isCallable","call","toInteger","number","Number","isNaN","isFinite","Math","floor","abs","maxSafeInteger","pow","toLength","len","min","max","arrayLike","C","items","TypeError","mapFn","T","A","k","kValue","defineProperty","searchElement","fromIndex","o","n","String","search","searchString","position","subjectString","lastIndex","lastIndexOf","siteInit","init","serviceWorker","register","then","registration","log","catch"],"mappings":"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"}